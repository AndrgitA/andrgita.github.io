(function(t){function e(e){for(var i,s,r=e[0],o=e[1],c=e[2],h=0,d=[];h<r.length;h++)s=r[h],Object.prototype.hasOwnProperty.call(n,s)&&n[s]&&d.push(n[s][0]),n[s]=0;for(i in o)Object.prototype.hasOwnProperty.call(o,i)&&(t[i]=o[i]);u&&u(e);while(d.length)d.shift()();return l.push.apply(l,c||[]),a()}function a(){for(var t,e=0;e<l.length;e++){for(var a=l[e],i=!0,r=1;r<a.length;r++){var o=a[r];0!==n[o]&&(i=!1)}i&&(l.splice(e--,1),t=s(s.s=a[0]))}return t}var i={},n={app:0},l=[];function s(e){if(i[e])return i[e].exports;var a=i[e]={i:e,l:!1,exports:{}};return t[e].call(a.exports,a,a.exports,s),a.l=!0,a.exports}s.m=t,s.c=i,s.d=function(t,e,a){s.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:a})},s.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},s.t=function(t,e){if(1&e&&(t=s(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var a=Object.create(null);if(s.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)s.d(a,i,function(e){return t[e]}.bind(null,i));return a},s.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return s.d(e,"a",e),e},s.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},s.p="/";var r=window["webpackJsonp"]=window["webpackJsonp"]||[],o=r.push.bind(r);r.push=e,r=r.slice();for(var c=0;c<r.length;c++)e(r[c]);var u=o;l.push([0,"chunk-vendors"]),a()})({0:function(t,e,a){t.exports=a("56d7")},"034f":function(t,e,a){"use strict";var i=a("85ec"),n=a.n(i);n.a},"0e1a":function(t,e,a){"use strict";var i=a("c739"),n=a.n(i);n.a},"56d7":function(t,e,a){"use strict";a.r(e);a("e260"),a("e6cf"),a("cca6"),a("a79d");var i=a("2b0e"),n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"app"}},[a("button",{on:{click:t.addTable}},[t._v(t._s(t.buttonName))]),t._l(t.tables,(function(e,i){return a("vue-table",t._b({key:e.indexTable,on:{remove:function(e){return t.handleRemove(i)},change:function(e){return t.updateTable(i,e)}}},"vue-table",e,!1))}))],2)},l=[],s=(a("a434"),function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"vue-table",class:{"is-blur":!t.loaded}},[a("div",{staticClass:"input-sarch"},[a("input",{attrs:{type:"text",placeholder:"Поиск"},domProps:{value:t.filterLine},on:{input:t.handleSearch}})]),t.loaded?t._e():a("div",{staticClass:"loading"},[t._v("Is loading")]),t.loaded?a("div",{staticClass:"table-view"},[a("div",{staticClass:"fields"},[t._l(t.curFields,(function(e,i){return a("div",{key:i,class:["table-col","table-col-cursor",null!==t.titleStyle?t.titleStyle:""],on:{click:function(e){return t.sortClick(i)}}},[t._v(t._s(e))])})),a("div",{class:["table-col","table-col-cursor",null!==t.titleStyle?t.titleStyle:""]},[t._v("Actions")])],2),t.curData.length>0?t._l(t.pageData,(function(e,i){return a("div",{key:i,class:["table-row",1&i?null!==t.evenStyle?t.evenStyle:"":null!==t.oddStyle?t.oddStyle:""]},[t._l(e.value,(function(e,n){return a("div",{key:n,staticClass:"full-rect",on:{dblclick:function(e){return t.fieldInput(e,i,n)}}},[t.isInput&&i===t.curIndexRow&&n===t.curIndexField?[a("input",{staticClass:"input-style-edit",attrs:{type:"text",id:t.indexTable+"-"+i+"-"+n},domProps:{value:e},on:{input:function(e){return t.inputField(e,i,n)},blur:function(e){t.isInput=!1},keydown:t.keyDown}})]:[a("div",{staticClass:"table-field"},[t._v(t._s(e)+" ")])]],2)})),a("div",{staticClass:"full-rect"},[a("div",{staticClass:"table-field"},[t.loaded?a("action-buttons",{on:{remove:function(e){return t.removeLine(i)},add:function(e){return t.addLine(i,e)}}}):t._e()],1)])],2)})):[a("button",{staticClass:"add-first-string",on:{click:t.addFirstString}},[t._v("Добавить первую строку")])]],2):t._e(),a("div",{staticClass:"bottom-table"},[a("div",{staticClass:"button-block"},[a("button",{on:{click:function(e){return t.$emit("remove")}}},[t._v("Удалить таблицу")]),a("button",{on:{click:t.handleRemoveData}},[t._v("Очистить таблицу")]),a("button",{on:{click:t.handleGetData}},[t._v("Получить данные")])]),a("div",{staticClass:"page-numbers"},t._l(t.getButtonsNames,(function(e,i){return a("button",{key:i,class:["number-page",{"active-page":e===t.nPage}],on:{click:function(a){return t.nextPage(e)}}},[t._v(t._s(e+1))])})),0)]),a("div",{class:["modal",{"modal-active":t.modalActive}]},[a("div",{staticClass:"block-modal"},[a("button",{staticClass:"bb btn-copy-buf",on:{click:t.copyBuffer}},[t._v("Скопировать в буффер")]),a("button",{staticClass:"bb btn-paste-buf",on:{click:t.pasteBuffer}},[t._v("Заполнить из буффера")]),a("button",{staticClass:"bb btn-export",on:{click:t.exportTable}},[t._v("Экспортировать")]),a("button",{staticClass:"bb btn-cancel",on:{click:function(e){t.modalActive=!1}}},[t._v("Закрыть")])])])])}),r=[],o=(a("99af"),a("4de4"),a("c740"),a("c975"),a("a15b"),a("13d5"),a("26e9"),a("fb6a"),a("45fc"),a("4e82"),a("0d03"),a("a9e3"),a("d3b7"),a("07ac"),a("ac1f"),a("25f0"),a("3ca3"),a("1276"),a("9911"),a("ddb0"),a("2b3d"),function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"action-buttons"},[a("div",{staticClass:"btn btn-delete",on:{click:function(e){return t.$emit("remove")}}},[a("svg",{staticStyle:{"enable-background":"new 0 0 348.333 348.334"},attrs:{version:"1.1",id:"Capa_1",xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",x:"0px",y:"0px",width:"20px",height:"20px",viewBox:"0 0 348.333 348.334","xml:space":"preserve"}},[a("g",[a("path",{attrs:{d:"M336.559,68.611L231.016,174.165l105.543,105.549c15.699,15.705,15.699,41.145,0,56.85\n                c-7.844,7.844-18.128,11.769-28.407,11.769c-10.296,0-20.581-3.919-28.419-11.769L174.167,231.003L68.609,336.563\n                c-7.843,7.844-18.128,11.769-28.416,11.769c-10.285,0-20.563-3.919-28.413-11.769c-15.699-15.698-15.699-41.139,0-56.85\n                l105.54-105.549L11.774,68.611c-15.699-15.699-15.699-41.145,0-56.844c15.696-15.687,41.127-15.687,56.829,0l105.563,105.554\n                L279.721,11.767c15.705-15.687,41.139-15.687,56.832,0C352.258,27.466,352.258,52.912,336.559,68.611z"}})])])]),a("div",{staticClass:"btn btn-up",on:{click:function(e){return t.$emit("add",-1)}}},[a("svg",{staticStyle:{"enable-background":"new 0 0 444.819 444.819"},attrs:{version:"1.1",id:"Capa_1",xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",x:"0px",y:"0px",width:"20px",height:"20px",viewBox:"0 0 444.819 444.819","xml:space":"preserve"}},[a("g",[a("path",{attrs:{d:"M352.025,196.712L165.884,10.848C159.029,3.615,150.469,0,140.187,0c-10.282,0-18.842,3.619-25.697,10.848L92.792,32.264\n                c-7.044,7.043-10.566,15.604-10.566,25.692c0,9.897,3.521,18.56,10.566,25.981l138.753,138.473L92.786,361.168\n                c-7.042,7.043-10.564,15.604-10.564,25.693c0,9.896,3.521,18.562,10.564,25.98l21.7,21.413\n                c7.043,7.043,15.612,10.564,25.697,10.564c10.089,0,18.656-3.521,25.697-10.564l186.145-185.864\n                c7.046-7.423,10.571-16.084,10.571-25.981C362.597,212.321,359.071,203.755,352.025,196.712z"}})])])]),a("div",{staticClass:"btn btn-down",on:{click:function(e){return t.$emit("add",1)}}},[a("svg",{staticStyle:{"enable-background":"new 0 0 444.819 444.819"},attrs:{version:"1.1",id:"Capa_1",xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",x:"0px",y:"0px",width:"20px",height:"20px",viewBox:"0 0 444.819 444.819","xml:space":"preserve"}},[a("g",[a("path",{attrs:{d:"M352.025,196.712L165.884,10.848C159.029,3.615,150.469,0,140.187,0c-10.282,0-18.842,3.619-25.697,10.848L92.792,32.264\n                c-7.044,7.043-10.566,15.604-10.566,25.692c0,9.897,3.521,18.56,10.566,25.981l138.753,138.473L92.786,361.168\n                c-7.042,7.043-10.564,15.604-10.564,25.693c0,9.896,3.521,18.562,10.564,25.98l21.7,21.413\n                c7.043,7.043,15.612,10.564,25.697,10.564c10.089,0,18.656-3.521,25.697-10.564l186.145-185.864\n                c7.046-7.423,10.571-16.084,10.571-25.981C362.597,212.321,359.071,203.755,352.025,196.712z"}})])])])])}),c=[],u={name:"ActionButton"},h=u,d=(a("c21a"),a("2877")),f=Object(d["a"])(h,o,c,!1,null,null,null),v=f.exports,p={name:"VueTable",componentName:"VueTable",components:{ActionButtons:v},props:{value:{type:Array,default:null},fields:{type:Array,default:null},rows:{type:Number,default:null},meta:{type:Object,default:null},indexTable:{type:Number,required:!0}},data:function(){return{titleStyle:null,oddStyle:null,evenStyle:null,curFields:[],link:"http://www.filltext.com/?rows=1000&id={number|1000}&firstName={firstName}&delay=3&lastName={lastName}&email={email}&phone={phone|(xxx)xxx-xx-xx}&adress={addressObject}&description={lorem|32}",search:"",curData:[],allData:[],loaded:!1,nPage:0,haveNames:!1,haveValue:!1,elementsPage:this.rows>0?this.rows:10,modalActive:!1,isInput:!1,curIndexRow:null,curIndexField:null,lastEditValue:null,curSortElement:null,sortDirection:!1,counter:0,filterLine:"",sortFlag:!0,filterFlag:!0}},computed:{pageData:function(){var t=this.curData.length;return t>0?this.elementsPage*(this.nPage+1)<=t?this.curData.slice(this.nPage*this.elementsPage,this.elementsPage*(this.nPage+1)):this.curData.slice(this.nPage*this.elementsPage):[]},getButtonsNames:function(){var t=Math.floor(this.curData.length/this.elementsPage);this.curData.length/this.elementsPage>1?t<this.curData.length/this.elementsPage&&(t+=1):t=0,console.log(t,new Array(t));for(var e=new Array(t),a=e.length,i=0;i<a;i++)e[i]=i;if(a>0){var n=Math.max(this.nPage-5,0),l=this.nPage+5<=a?this.nPage+5:a;return e.slice(n,l)}return[]}},created:function(){null!==this.meta&&(this.titleStyle=this.meta.hasOwnProperty("titleStyle")?this.meta.titleStyle:null,this.oddStyle=this.meta.hasOwnProperty("oddStyle")?this.meta.oddStyle:null,this.evenStyle=this.meta.hasOwnProperty("evenStyle")?this.meta.evenStyle:null),null!==this.fields?(this.curFields=this.fields,this.curFields.length>0&&(this.haveNames=!0,this.haveValue=!0,this.curSortElement=this.curFields[0]),this.allData=[],this.curData=[],this.$emit("change",{value:this.allData,fields:this.curFields,rows:this.rows,meta:this.mata}),this.loaded=!0):this.getData()},methods:{filterData:function(t){var e=this,a=JSON.parse(JSON.stringify(this.filterFlag?t:this.curData));console.log("FILTER: ",this.filterFlag);var i=!this.filterFlag||""===this.filterLine;if(!i){var n=this.filterLine.split(" ").join("").toLowerCase();a=a.filter((function(t){return Object.values(t.value).some((function(t){return t.toString().toLowerCase().indexOf(n)>-1}))}))}if(this.sortFlag){var l=function(t,a){return t["value"][e.curSortElement]<a["value"][e.curSortElement]?-1:t["value"][e.curSortElement]>a["value"][e.curSortElement]?1:0};this.sortDirection?a.sort(l).reverse():a.sort(l),this.allData=a}return JSON.parse(JSON.stringify(a))},sortClick:function(t){console.log("CLICK"),this.sortFlag=!0,this.filterFlag=!0;var e=this.curFields[t];this.loaded=!1,e===this.curSortElement?this.sortDirection=!this.sortDirection:this.sortDirection=!1,this.curSortElement=e,this.curData=this.filterData(this.allData),this.loaded=!0},keyDown:function(t){var e=this;if(13===t.keyCode)this.$emit("change",{value:this.allData,fields:this.curFields,rows:this.rows,meta:this.mata}),t.preventDefault(),this.isInput=!1,this.sortFlag=!0,this.filterFlag=!0;else if(27===t.keyCode){if(this.sortFlag=!0,this.filterFlag=!0,null!==this.curIndexRow&&null!==this.curIndexFields&&null!==this.lastEditValue){var a=this.allData.findIndex((function(t){return t.lineID===e.curData[e.curIndexRow+e.elementsPage*e.nPage].lineID}));this.allData[a]["value"][this.curIndexField]=this.lastEditValue,this.curData[this.curIndexRow+this.elementsPage*this.nPage]["value"][this.curIndexField]=this.lastEditValue,this.lastEditValue=null,this.curIndexRow=null,this.curIndexField=null}this.$emit("change",{value:this.curData,fields:this.curFields,rows:this.rows,meta:this.mata}),this.isInput=!1,t.preventDefault()}},inputField:function(t,e,a){var i=this;this.sortFlag=!1,this.filterFlag=!1;var n=this.allData.findIndex((function(t){return t.lineID===i.curData[e+i.elementsPage*i.nPage].lineID}));this.allData[n]["value"][a]=t.target.value,this.curData[e+this.elementsPage*this.nPage]["value"][a]=t.target.value,this.$emit("change",{value:this.allData,fields:this.curFields,rows:this.rows,meta:this.mata})},fieldInput:function(t,e,a){var i=this;this.sortFlag=!1,this.filterFlag=!1,this.isInput=!0,console.log(t,e,a),this.curIndexRow=e,this.curIndexField=a;var n=this.allData.findIndex((function(t){return t.lineID===i.curData[e+i.elementsPage*i.nPage].lineID}));this.lastEditValue=this.allData[n]["value"][a],setTimeout((function(){var t="".concat(i.indexTable,"-").concat(e,"-").concat(a);document.getElementById(t).focus()}),100)},pasteBuffer:function(t){var e=this;navigator.clipboard.readText().then((function(t){var a=JSON.parse(t);e.loaded=!1,e.haveNames=!1,e.haveValue=!1,e.allData=[];var i=[];if("[object Array]"===Object.prototype.toString.call(a)&&a.length>0){e.curFields=e.getNames(a[0]),e.curFields.length>0&&(e.haveNames=!0,e.haveValue=!0,e.curSortElement=e.curFields[0]);for(var n=0;n<a.length;n++){var l=e.marshData(a[n]);e.counter++,i.push({lineID:e.counter,value:l})}}e.allData=i,e.curData=e.filterData(e.allData),e.$emit("change",{value:e.allData,fields:e.curFields,rows:e.rows,meta:e.mata}),e.loaded=!0,alert("success paste")})).catch((function(t){console.log("Something went wrong",t)}))},copyBuffer:function(t){for(var e=[],a=0;a<this.allData.length;a++)e.push(this.unmarshData(this.allData[a].value));navigator.clipboard.writeText(JSON.stringify(e)).then((function(){alert("success copy")})).catch((function(t){alert("can't copy")}))},exportTable:function(t){for(var e=[],a=0;a<this.allData.length;a++)e.push(this.unmarshData(this.allData[a].value));var i=JSON.stringify(e,null,"\t"),n=new Blob([i],{type:"application/json"}),l=document.createElement("a"),s=window.URL.createObjectURL(n);l.setAttribute("href",s),l.setAttribute("download","table-data.json"),l.click(),setTimeout((function(){window.URL.revokeObjectURL(s)}),100)},removeLine:function(t){var e=this;this.sortFlag=!1,this.filterFlag=!1;var a=this.allData.findIndex((function(a){return a.lineID===e.curData[t+e.elementsPage*e.nPage].lineID}));1===this.pageData.length&&0!==this.nPage&&this.nPage--,this.allData.splice(a,1),this.curData.splice(t+this.elementsPage*this.nPage,1),this.$emit("change",{value:this.allData,fields:this.curFields,rows:this.rows,meta:this.mata})},addLine:function(t,e){var a=this;this.sortFlag=!1,this.filterFlag=!1;var i=this.curFields.reduce((function(t,e){return t[e]="",t}),{}),n=this.allData.findIndex((function(e){return e.lineID===a.curData[t+a.elementsPage*a.nPage].lineID})),l=e>0?n+1:n;console.log(l),this.counter++,this.allData.splice(l,0,{lineID:this.counter,value:i}),this.curData.splice((e>0?t+1:t)+this.elementsPage*this.nPage,0,{lineID:this.counter,value:i}),this.$emit("change",{value:this.allData,fields:this.curFields,rows:this.rows,meta:this.mata})},addFirstString:function(t){this.sortFlag=!1,this.filterFlag=!1;var e=this.curFields.reduce((function(t,e){return t[e]="",t}),{});this.counter++,this.allData.push({lineID:this.counter,value:e}),this.curData.push({lineID:this.counter,value:e}),this.$emit("change",{value:this.allData,fields:this.curFields,rows:this.rows,meta:this.mata})},handleSearch:function(t){this.sortFlag=!1,this.filterFlag=!0,console.log(t.target.value),this.filterLine=t.target.value,this.curData=this.filterData(this.allData)},handleRemoveData:function(t){this.allData=[],this.curData=[],this.nPage=0,this.$emit("change",{value:this.allData,fields:this.curFields,rows:this.rows,meta:this.mata})},handleGetData:function(t){this.modalActive=!0},nextPage:function(t){this.nPage=t},getNames:function(t){var e=[];for(var a in t)if("[object Object]"===Object.prototype.toString.call(t[a]))for(var i=this.getNames(t[a]),n=0;n<i.length;n++)e.push("".concat(a,".").concat(i[n]));else e.push(a);return e},marshData:function(t){var e={};for(var a in t)if("[object Object]"===Object.prototype.toString.call(t[a])){var i=this.marshData(t[a]);for(var n in i)e["".concat(a,".").concat(n)]=i[n]}else e[a]=t[a];return e},unmarshData:function(t){var e={};for(var a in t){var i=a.split(".");if(1===i.length)e[a]=t[a];else{for(var n=e,l=0;l<i.length-1;l++)n.hasOwnProperty(i[l])||(n[i[l]]={}),n=n[i[l]];n[i[i.length-1]]=t[a]}}return e},getData:function(){this.loaded=!1;var t=this.link,e=new XMLHttpRequest;e.open("GET",t,!0),e.overrideMimeType("application/json");var a=this;e.onload=function(){if(200===this.status){var t=JSON.parse(this.response);if(t.length>0){a.curFields=a.getNames(t[0]),a.curFields.length>0&&(a.haveNames=!0,a.haveValue=!0,a.curSortElement=a.curFields[0]);for(var e=0;e<t.length;e++){var i=a.marshData(t[e]);a.counter+=e,a.allData.push({lineID:a.counter,value:i})}}a.curData=a.filterData(a.allData),a.$emit("change",{value:a.allData,fields:a.curFields,rows:a.rows,meta:a.mata}),a.loaded=!0}},e.onerror=function(t){console.error(e.statusText),a.loaded=!0},e.send()}}},g=p,m=(a("0e1a"),Object(d["a"])(g,s,r,!1,null,null,null)),b=m.exports,D={name:"app",components:{VueTable:b},data:function(){return{buttonName:"Добавить таблицу",tables:[],tableCounter:0}},methods:{addTable:function(t){this.tables.push({indexTable:this.tableCounter}),this.tableCounter++},updateTable:function(t,e){this.tables[t].fields=e.fields,this.tables[t].rows=e.rows,this.tables[t].value=e.value,this.tables[t].meta=e.meta},handleRemove:function(t){this.tables.splice(t,1)}}},w=D,x=(a("034f"),Object(d["a"])(w,n,l,!1,null,null,null)),y=x.exports;i["a"].config.productionTip=!1,new i["a"]({render:function(t){return t(y)}}).$mount("#app")},7453:function(t,e,a){},"85ec":function(t,e,a){},c21a:function(t,e,a){"use strict";var i=a("7453"),n=a.n(i);n.a},c739:function(t,e,a){}});
//# sourceMappingURL=app-legacy.5de1acac.js.map