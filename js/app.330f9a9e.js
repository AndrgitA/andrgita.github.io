(function(t){function e(e){for(var s,n,r=e[0],o=e[1],h=e[2],u=0,d=[];u<r.length;u++)n=r[u],Object.prototype.hasOwnProperty.call(i,n)&&i[n]&&d.push(i[n][0]),i[n]=0;for(s in o)Object.prototype.hasOwnProperty.call(o,s)&&(t[s]=o[s]);c&&c(e);while(d.length)d.shift()();return l.push.apply(l,h||[]),a()}function a(){for(var t,e=0;e<l.length;e++){for(var a=l[e],s=!0,r=1;r<a.length;r++){var o=a[r];0!==i[o]&&(s=!1)}s&&(l.splice(e--,1),t=n(n.s=a[0]))}return t}var s={},i={app:0},l=[];function n(e){if(s[e])return s[e].exports;var a=s[e]={i:e,l:!1,exports:{}};return t[e].call(a.exports,a,a.exports,n),a.l=!0,a.exports}n.m=t,n.c=s,n.d=function(t,e,a){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:a})},n.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var a=Object.create(null);if(n.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var s in t)n.d(a,s,function(e){return t[e]}.bind(null,s));return a},n.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="/";var r=window["webpackJsonp"]=window["webpackJsonp"]||[],o=r.push.bind(r);r.push=e,r=r.slice();for(var h=0;h<r.length;h++)e(r[h]);var c=o;l.push([0,"chunk-vendors"]),a()})({0:function(t,e,a){t.exports=a("56d7")},"034f":function(t,e,a){"use strict";var s=a("85ec"),i=a.n(s);i.a},"0e1a":function(t,e,a){"use strict";var s=a("c739"),i=a.n(s);i.a},"56d7":function(t,e,a){"use strict";a.r(e);var s=a("2b0e"),i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"app"}},[a("button",{on:{click:t.addTable}},[t._v(t._s(t.buttonName))]),t._l(t.tables,(function(e,s){return a("vue-table",t._b({key:e.indexTable,on:{remove:function(e){return t.handleRemove(s)},change:function(e){return t.updateTable(s,e)}}},"vue-table",e,!1))}))],2)},l=[],n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"vue-table",class:{"is-blur":!t.loadedShow}},[a("div",{staticClass:"input-sarch",class:{"events-none":!t.loaded}},[a("input",{attrs:{type:"text",placeholder:"Поиск"},domProps:{value:t.filterLine},on:{input:t.handleSearch}})]),t.loaded?t._e():a("div",{staticClass:"loading"},[t._v("Is loading")]),t.loadedShow?a("div",{staticClass:"table-view"},[a("div",{staticClass:"fields"},[t._l(t.curFields,(function(e,s){return a("div",{key:s,class:["table-col","table-col-cursor",null!==t.titleStyle?t.titleStyle:""],on:{click:function(e){return t.sortClick(s)}}},[t._v(t._s(e))])})),a("div",{class:["table-col","table-col-cursor",null!==t.titleStyle?t.titleStyle:"",{"events-none":!t.loaded}]},[t._v("Actions")])],2),t.curData.length>0?t._l(t.pageData,(function(e,s){return a("div",{key:s,class:["table-row",1&s?null!==t.evenStyle?t.evenStyle:"":null!==t.oddStyle?t.oddStyle:""]},[t._l(e.value,(function(e,i){return a("div",{key:i,staticClass:"full-rect",class:{"events-none":!t.loaded},on:{dblclick:function(e){return t.fieldInput(e,s,i)}}},[t.isInput&&s===t.curIndexRow&&i===t.curIndexField?[a("input",{staticClass:"input-style-edit",attrs:{type:"text",id:t.indexTable+"-"+s+"-"+i},domProps:{value:e},on:{input:function(e){return t.inputField(e,s,i)},blur:function(e){t.isInput=!1},keydown:t.keyDown}})]:[a("div",{staticClass:"table-field"},[t._v(t._s(e)+" ")])]],2)})),a("div",{staticClass:"full-rect",class:{"events-none":!t.loaded}},[a("div",{staticClass:"table-field"},[a("action-buttons",{on:{remove:function(e){return t.removeLine(s)},add:function(e){return t.addLine(s,e)}}})],1)])],2)})):[a("button",{staticClass:"add-first-string",on:{click:t.addFirstString}},[t._v("Добавить первую строку")])]],2):t._e(),a("div",{staticClass:"bottom-table",class:{"events-none":!t.loaded}},[a("div",{staticClass:"button-block"},[a("button",{on:{click:function(e){return t.$emit("remove")}}},[t._v("Удалить таблицу")]),a("button",{on:{click:t.handleRemoveData}},[t._v("Очистить таблицу")]),a("button",{on:{click:t.handleGetData}},[t._v("Получить данные")])]),a("div",{staticClass:"page-numbers"},t._l(t.getButtonsNames,(function(e,s){return a("button",{key:s,class:["number-page",{"active-page":e===t.nPage}],on:{click:function(a){return t.nextPage(e)}}},[t._v(t._s(e+1))])})),0)]),a("div",{class:["modal",{"modal-active":t.modalActive}]},[a("div",{staticClass:"block-modal",class:{"events-none":!t.loaded}},[a("button",{staticClass:"bb btn-copy-buf",on:{click:t.copyBuffer}},[t._v("Скопировать в буффер")]),a("button",{staticClass:"bb btn-paste-buf",on:{click:t.pasteBuffer}},[t._v("Заполнить из буффера")]),a("button",{staticClass:"bb btn-export",on:{click:t.exportTable}},[t._v("Экспортировать")]),a("button",{staticClass:"bb btn-cancel",on:{click:function(e){t.modalActive=!1}}},[t._v("Закрыть")])])])])},r=[],o=(a("e260"),a("26e9"),a("4e82"),a("25f0"),a("1276"),a("ddb0"),a("2b3d"),function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"action-buttons"},[a("div",{staticClass:"btn btn-delete",on:{click:function(e){return t.$emit("remove")}}},[a("svg",{staticStyle:{"enable-background":"new 0 0 348.333 348.334"},attrs:{version:"1.1",id:"Capa_1",xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",x:"0px",y:"0px",width:"20px",height:"20px",viewBox:"0 0 348.333 348.334","xml:space":"preserve"}},[a("g",[a("path",{attrs:{d:"M336.559,68.611L231.016,174.165l105.543,105.549c15.699,15.705,15.699,41.145,0,56.85\n                c-7.844,7.844-18.128,11.769-28.407,11.769c-10.296,0-20.581-3.919-28.419-11.769L174.167,231.003L68.609,336.563\n                c-7.843,7.844-18.128,11.769-28.416,11.769c-10.285,0-20.563-3.919-28.413-11.769c-15.699-15.698-15.699-41.139,0-56.85\n                l105.54-105.549L11.774,68.611c-15.699-15.699-15.699-41.145,0-56.844c15.696-15.687,41.127-15.687,56.829,0l105.563,105.554\n                L279.721,11.767c15.705-15.687,41.139-15.687,56.832,0C352.258,27.466,352.258,52.912,336.559,68.611z"}})])])]),a("div",{staticClass:"btn btn-up",on:{click:function(e){return t.$emit("add",-1)}}},[a("svg",{staticStyle:{"enable-background":"new 0 0 444.819 444.819"},attrs:{version:"1.1",id:"Capa_1",xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",x:"0px",y:"0px",width:"20px",height:"20px",viewBox:"0 0 444.819 444.819","xml:space":"preserve"}},[a("g",[a("path",{attrs:{d:"M352.025,196.712L165.884,10.848C159.029,3.615,150.469,0,140.187,0c-10.282,0-18.842,3.619-25.697,10.848L92.792,32.264\n                c-7.044,7.043-10.566,15.604-10.566,25.692c0,9.897,3.521,18.56,10.566,25.981l138.753,138.473L92.786,361.168\n                c-7.042,7.043-10.564,15.604-10.564,25.693c0,9.896,3.521,18.562,10.564,25.98l21.7,21.413\n                c7.043,7.043,15.612,10.564,25.697,10.564c10.089,0,18.656-3.521,25.697-10.564l186.145-185.864\n                c7.046-7.423,10.571-16.084,10.571-25.981C362.597,212.321,359.071,203.755,352.025,196.712z"}})])])]),a("div",{staticClass:"btn btn-down",on:{click:function(e){return t.$emit("add",1)}}},[a("svg",{staticStyle:{"enable-background":"new 0 0 444.819 444.819"},attrs:{version:"1.1",id:"Capa_1",xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",x:"0px",y:"0px",width:"20px",height:"20px",viewBox:"0 0 444.819 444.819","xml:space":"preserve"}},[a("g",[a("path",{attrs:{d:"M352.025,196.712L165.884,10.848C159.029,3.615,150.469,0,140.187,0c-10.282,0-18.842,3.619-25.697,10.848L92.792,32.264\n                c-7.044,7.043-10.566,15.604-10.566,25.692c0,9.897,3.521,18.56,10.566,25.981l138.753,138.473L92.786,361.168\n                c-7.042,7.043-10.564,15.604-10.564,25.693c0,9.896,3.521,18.562,10.564,25.98l21.7,21.413\n                c7.043,7.043,15.612,10.564,25.697,10.564c10.089,0,18.656-3.521,25.697-10.564l186.145-185.864\n                c7.046-7.423,10.571-16.084,10.571-25.981C362.597,212.321,359.071,203.755,352.025,196.712z"}})])])])])}),h=[],c={name:"ActionButton"},u=c,d=(a("c21a"),a("2877")),v=Object(d["a"])(u,o,h,!1,null,null,null),p=v.exports,f={name:"VueTable",componentName:"VueTable",components:{ActionButtons:p},props:{value:{type:Array,default:null},fields:{type:Array,default:null},rows:{type:Number,default:null},meta:{type:Object,default:null},indexTable:{type:Number,required:!0}},data(){return{titleStyle:null,oddStyle:null,evenStyle:null,curFields:[],link:"http://www.filltext.com/?rows=1000&id={number|1000}&firstName={firstName}&delay=3&lastName={lastName}&email={email}&phone={phone|(xxx)xxx-xx-xx}&adress={addressObject}&description={lorem|32}",search:"",curData:[],allData:[],loaded:!1,loadedShow:!1,nPage:0,haveNames:!1,haveValue:!1,elementsPage:this.rows>0?this.rows:10,modalActive:!1,isInput:!1,curIndexRow:null,curIndexField:null,lastEditValue:null,curSortElement:null,sortDirection:!1,counter:0,filterLine:"",sortFlag:!0,filterFlag:!0}},computed:{pageData(){var t=this.curData.length;return t>0?this.elementsPage*(this.nPage+1)<=t?this.curData.slice(this.nPage*this.elementsPage,this.elementsPage*(this.nPage+1)):this.curData.slice(this.nPage*this.elementsPage):[]},getButtonsNames(){var t=Math.floor(this.curData.length/this.elementsPage);this.curData.length/this.elementsPage>1?t<this.curData.length/this.elementsPage&&(t+=1):t=0;for(var e=new Array(t),a=e.length,s=0;s<a;s++)e[s]=s;if(a>0){var i=Math.max(this.nPage-5,0),l=this.nPage+5<=a?this.nPage+5:a;return e.slice(i,l)}return[]}},created(){null!==this.meta&&(this.titleStyle=this.meta.hasOwnProperty("titleStyle")?this.meta.titleStyle:null,this.oddStyle=this.meta.hasOwnProperty("oddStyle")?this.meta.oddStyle:null,this.evenStyle=this.meta.hasOwnProperty("evenStyle")?this.meta.evenStyle:null),null!==this.fields?(this.curFields=this.fields,this.curFields.length>0&&(this.haveNames=!0,this.haveValue=!0,this.curSortElement=this.curFields[0]),this.allData=[],this.curData=[],this.$emit("change",{value:this.allData,fields:this.curFields,rows:this.rows,meta:this.meta}),this.loadedShow=!0,this.loaded=!0):this.getData()},methods:{filterData(t){var e=JSON.parse(JSON.stringify(this.filterFlag?t:this.curData)),a=!this.filterFlag||""===this.filterLine;if(!a){var s=this.filterLine.split(" ").join("").toLowerCase();e=e.filter(t=>Object.values(t.value).some(t=>t.toString().toLowerCase().indexOf(s)>-1))}if(this.sortFlag){var i=(t,e)=>{return t["value"][this.curSortElement]<e["value"][this.curSortElement]?-1:t["value"][this.curSortElement]>e["value"][this.curSortElement]?1:0};this.sortDirection?e.sort(i).reverse():e.sort(i),this.allData=e}return JSON.parse(JSON.stringify(e))},sortClick(t){if(this.loaded){console.log("CLICK"),this.sortFlag=!0,this.filterFlag=!0;var e=this.curFields[t];e===this.curSortElement?this.sortDirection=!this.sortDirection:this.sortDirection=!1,this.curSortElement=e,this.curData=this.filterData(this.allData)}},keyDown(t){if(13===t.keyCode)this.$emit("change",{value:this.allData,fields:this.curFields,rows:this.rows,meta:this.meta}),t.preventDefault(),this.isInput=!1,this.sortFlag=!0,this.filterFlag=!0;else if(27===t.keyCode){if(this.sortFlag=!0,this.filterFlag=!0,null!==this.curIndexRow&&null!==this.curIndexFields&&null!==this.lastEditValue){var e=this.allData.findIndex(t=>{return t.lineID===this.curData[this.curIndexRow+this.elementsPage*this.nPage].lineID});this.allData[e]["value"][this.curIndexField]=this.lastEditValue,this.curData[this.curIndexRow+this.elementsPage*this.nPage]["value"][this.curIndexField]=this.lastEditValue,this.lastEditValue=null,this.curIndexRow=null,this.curIndexField=null}this.$emit("change",{value:this.curData,fields:this.curFields,rows:this.rows,meta:this.meta}),this.isInput=!1,t.preventDefault()}},inputField(t,e,a){this.sortFlag=!1,this.filterFlag=!1;var s=this.allData.findIndex(t=>{return t.lineID===this.curData[e+this.elementsPage*this.nPage].lineID});this.allData[s]["value"][a]=t.target.value,this.curData[e+this.elementsPage*this.nPage]["value"][a]=t.target.value,this.$emit("change",{value:this.allData,fields:this.curFields,rows:this.rows,meta:this.meta})},fieldInput(t,e,a){if(this.loaded){this.sortFlag=!1,this.filterFlag=!1,this.isInput=!0,console.log(t,e,a),this.curIndexRow=e,this.curIndexField=a;var s=this.allData.findIndex(t=>{return t.lineID===this.curData[e+this.elementsPage*this.nPage].lineID});this.lastEditValue=this.allData[s]["value"][a],setTimeout(()=>{var t="".concat(this.indexTable,"-").concat(e,"-").concat(a);document.getElementById(t).focus()},100)}},pasteBuffer(t){this.loaded&&navigator.clipboard.readText().then(t=>{var e=JSON.parse(t);this.loaded=!1,this.false=!0,this.haveNames=!1,this.haveValue=!1,this.allData=[];var a=[];if("[object Array]"===Object.prototype.toString.call(e)&&e.length>0){this.curFields=this.getNames(e[0]),this.curFields.length>0&&(this.haveNames=!0,this.haveValue=!0,this.curSortElement=this.curFields[0]);for(var s=0;s<e.length;s++){var i=this.marshData(e[s]);this.counter++,a.push({lineID:this.counter,value:i})}}this.allData=a,this.curData=this.filterData(this.allData),this.$emit("change",{value:this.allData,fields:this.curFields,rows:this.rows,meta:this.meta}),this.true=!0,this.loaded=!0,alert("success paste")}).catch(t=>{console.log("Something went wrong",t)})},copyBuffer(t){if(this.loaded){for(var e=[],a=0;a<this.allData.length;a++)e.push(this.unmarshData(this.allData[a].value));navigator.clipboard.writeText(JSON.stringify(e)).then(()=>{alert("success copy")}).catch(t=>{alert("can't copy")})}},exportTable(t){if(this.loaded){for(var e=[],a=0;a<this.allData.length;a++)e.push(this.unmarshData(this.allData[a].value));var s=JSON.stringify(e,null,"\t"),i=new Blob([s],{type:"application/json"}),l=document.createElement("a"),n=window.URL.createObjectURL(i);l.setAttribute("href",n),l.setAttribute("download","table-data.json"),l.click(),setTimeout(()=>{window.URL.revokeObjectURL(n)},100)}},removeLine(t){this.sortFlag=!1,this.filterFlag=!1;var e=this.allData.findIndex(e=>{return e.lineID===this.curData[t+this.elementsPage*this.nPage].lineID});1===this.pageData.length&&0!==this.nPage&&this.nPage--,this.allData.splice(e,1),this.curData.splice(t+this.elementsPage*this.nPage,1),this.$emit("change",{value:this.allData,fields:this.curFields,rows:this.rows,meta:this.meta})},addLine(t,e){this.sortFlag=!1,this.filterFlag=!1;var a=this.curFields.reduce((t,e)=>{return t[e]="",t},{}),s=this.allData.findIndex(e=>{return e.lineID===this.curData[t+this.elementsPage*this.nPage].lineID}),i=e>0?s+1:s;console.log(i),this.counter++,this.allData.splice(i,0,{lineID:this.counter,value:a}),this.curData.splice((e>0?t+1:t)+this.elementsPage*this.nPage,0,{lineID:this.counter,value:a}),this.$emit("change",{value:this.allData,fields:this.curFields,rows:this.rows,meta:this.meta})},addFirstString(t){this.sortFlag=!1,this.filterFlag=!1;var e=this.curFields.reduce((t,e)=>{return t[e]="",t},{});this.counter++,this.allData.push({lineID:this.counter,value:e}),this.curData.push({lineID:this.counter,value:e}),this.$emit("change",{value:this.allData,fields:this.curFields,rows:this.rows,meta:this.meta})},handleSearch(t){this.sortFlag=!1,this.filterFlag=!0,console.log(t.target.value),this.filterLine=t.target.value,this.nPage=0,this.curData=this.filterData(this.allData)},handleRemoveData(t){this.allData=[],this.curData=[],this.nPage=0,this.$emit("change",{value:this.allData,fields:this.curFields,rows:this.rows,meta:this.meta})},handleGetData(t){this.modalActive=!0},nextPage(t){this.nPage=t},getNames(t){var e=[];for(var a in t)if("[object Object]"===Object.prototype.toString.call(t[a]))for(var s=this.getNames(t[a]),i=0;i<s.length;i++)e.push("".concat(a,".").concat(s[i]));else e.push(a);return e},marshData(t){var e={};for(var a in t)if("[object Object]"===Object.prototype.toString.call(t[a])){var s=this.marshData(t[a]);for(var i in s)e["".concat(a,".").concat(i)]=s[i]}else e[a]=t[a];return e},unmarshData(t){var e={};for(var a in t){var s=a.split(".");if(1===s.length)e[a]=t[a];else{for(var i=e,l=0;l<s.length-1;l++)i.hasOwnProperty(s[l])||(i[s[l]]={}),i=i[s[l]];i[s[s.length-1]]=t[a]}}return e},getData(){this.loaded=!1,this.loadedShow=!1;var t="https://cors-anywhere.herokuapp.com/".concat(this.link),e=new XMLHttpRequest;e.open("GET",t,!0),e.overrideMimeType("application/json");var a=1;e.onload=t=>{for(var e=t.target.responseText,a=[],s=JSON.parse(e),i=0;i<s.length;i++){var l=this.marshData(s[i]);this.counter+=i,a.push({lineID:this.counter,value:l})}this.allData=a,this.curData=this.filterData(a),this.loaded=!0,this.$emit("change",{value:this.allData,fields:this.curFields,rows:this.rows,meta:this.meta})},e.onprogress=t=>{for(var e=t.target.responseText,s=0,i=0,l=a;l<e.length;l++)"{"===e[l]?s++:"}"===e[l]&&(s--,0===s&&(i=l));var n=e.slice(a,i+1),r=JSON.parse("[".concat(n,"]"));if(r.length>0){0===this.curFields.length&&(this.curFields=this.getNames(r[0]),this.haveNames=!0,this.curSortElement=this.curFields[0]);for(var o=0;o<r.length;o++){var h=this.marshData(r[o]);this.counter+=o,this.allData.push({lineID:this.counter,value:h})}this.curData=this.allData,this.loadedShow=!0}a=i+2},e.send()}}},g=f,m=(a("0e1a"),Object(d["a"])(g,n,r,!1,null,null,null)),b=m.exports,D={name:"app",components:{VueTable:b},data(){return{buttonName:"Добавить таблицу",tables:[],tableCounter:0}},methods:{addTable(t){this.tables.push({indexTable:this.tableCounter}),this.tableCounter++},updateTable(t,e){this.tables[t].fields=e.fields,this.tables[t].rows=e.rows,this.tables[t].value=e.value,this.tables[t].meta=e.meta},handleRemove(t){this.tables.splice(t,1)}}},w=D,x=(a("034f"),Object(d["a"])(w,i,l,!1,null,null,null)),y=x.exports;s["a"].config.productionTip=!1,new s["a"]({render:t=>t(y)}).$mount("#app")},7453:function(t,e,a){},"85ec":function(t,e,a){},c21a:function(t,e,a){"use strict";var s=a("7453"),i=a.n(s);i.a},c739:function(t,e,a){}});
//# sourceMappingURL=app.330f9a9e.js.map